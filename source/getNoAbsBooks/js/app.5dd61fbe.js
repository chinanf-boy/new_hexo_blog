webpackJsonp([1],{"+VGo":function(t,e){},0:function(t,e,o){t.exports=o("NHnr")},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o("EuXz");var n=o("/5sW"),i=(o("CvWX"),o("Y1S0"),o("NYxO")),s=o("mtWM");s.defaults.timeout=5e3,Object({NODE_ENV:"production",BASE_URL:"/"}).BOOK_DEV?s.defaults.baseURL="http://localhost:5000":s.defaults.baseURL="https://getnoabsbooks.herokuapp.com",console.log(Object({NODE_ENV:"production",BASE_URL:"/"}).BookDev);var r=s,a=o("hBlz"),u=o.n(a);o("rQBB"),n["default"].use(i["a"]);var c=new i["a"].Store({state:{books:[],Api:"http://m.76wx.com",suffix:"html",directory:"book"},mutations:{clearBooks:function(t){t.books=[]},addBooks:function(t,e){Object.keys(e).forEach(function(o){t.books.push(e[o])})},changeApi:function(t,e){t.Api=e},changeSuffix:function(t,e){t.suffix=e}},getters:{getFullUrl:function(t){return function(e){var o=new u.a(t.Api),n="";if(e.endsWith("/")&&(n="/"),e=e.trimStr("/"),e+=n,e.startsWith(t.directory)?o.segment(e):(o.directory(t.directory),o.segment(e)),o.href().endsWith("/"))return o.href();if(o.suffix())return o.href();if(2==o.segment().length)return o.href()+"/";var i=o.suffix(t.suffix).href();return i}}},actions:{addJsonStore:function(t,e){return console.log("adding jsonstore",e),r.post("/api/addJsonStore",{url:e}).then(function(t){console.log("add jsonstore",t.data.ok)})},getAllBooks:function(t){var e=t.commit;return e("clearBooks"),r.get("/api/getAllBooks").then(function(t){e("addBooks",t.data.result)})},getBookIndex:function(t,e){t.commit,t.state;var o=t.getters,n=o.getFullUrl(e);return r.post("/api/getNoAbsBooks",{url:n}).then(function(t){return t})}}}),l=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{attrs:{id:"app"}},[o("div",{attrs:{id:"nav"}},[o("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" |\n    "),o("router-link",{attrs:{to:"/about"}},[t._v("About")])],1),o("router-view")],1),o("footer")])},p=[],h=o("XyMi");function f(t){o("+VGo")}var v=null,d=!1,m=f,g=null,b=null,_=Object(h["a"])(v,l,p,d,m,g,b),k=_.exports,x=o("/ocq"),S={name:"HelloWorld",props:{msg:String}},I=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"hello"},[o("h1",[t._v(t._s(t.msg))]),t._m(0),o("h3",[t._v("Installed CLI Plugins")]),t._m(1),o("h3",[t._v("Essential Links")]),t._m(2),o("h3",[t._v("Ecosystem")]),t._m(3)])},j=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("p",[t._v("\n    For guide and recipes on how to configure / customize this project,"),o("br"),t._v("\n    check out the\n    "),o("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/docs",target:"_blank"}},[t._v("vue-cli documentation")]),t._v(".\n  ")])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ul",[o("li",[o("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank"}},[t._v("babel")])]),o("li",[o("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank"}},[t._v("eslint")])]),o("li",[o("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-e2e-cypress",target:"_blank"}},[t._v("e2e-cypress")])])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ul",[o("li",[o("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("Core Docs")])]),o("li",[o("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("Forum")])]),o("li",[o("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("Community Chat")])]),o("li",[o("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("Twitter")])])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ul",[o("li",[o("a",{attrs:{href:"https://router.vuejs.org/en/essentials/getting-started.html",target:"_blank"}},[t._v("vue-router")])]),o("li",[o("a",{attrs:{href:"https://vuex.vuejs.org/en/intro.html",target:"_blank"}},[t._v("vuex")])]),o("li",[o("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank"}},[t._v("vue-devtools")])]),o("li",[o("a",{attrs:{href:"https://vue-loader.vuejs.org/en",target:"_blank"}},[t._v("vue-loader")])]),o("li",[o("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[t._v("awesome-vue")])])])}];function B(t){o("b3AN")}var y=!1,w=B,A="data-v-487ff563",$=null,E=Object(h["a"])(S,I,j,y,w,A,$),V=E.exports,L=(o("rQBB"),{name:"home",data:function(){return{books:[],Input:"2222",API:"",popupVisible:!1}},created:function(){this.$store.dispatch("getAllBooks").catch(function(t){console.error(t)})},mounted:function(){this.books=this.$store.state.books,this.API=this.$store.state.Api,this.$refs.In.focus()},methods:{textInput:function(){var t=this,e=this.getFull(this.Input);this.addJsonStore(e).catch(function(e){t.popupVisible=!0});var o=new u.a(e);o.suffix()&&this.$store.commit("changeSuffix",o.suffix()),this.$router.push({path:"".concat(o.pathname())})},getFull:function(t){return this.$store.getters.getFullUrl(t)},addJsonStore:function(t){return this.$store.dispatch("addJsonStore",t)},changeS:function(){this.$store.commit("changeApi",this.API)}},watch:{popupVisible:function(t){var e=this;setTimeout(function(){e.popupVisible=!1},1e3)}},components:{HelloWorld:V}}),z=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"home"},[o("mt-popup",{attrs:{position:"top","popup-transition":"popup-fade"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[t._v("\n    添加 书籍 失败\n  ")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.API,expression:"API"}],attrs:{type:"text",placeholder:"默认源"},domProps:{value:t.API},on:{input:function(e){e.target.composing||(t.API=e.target.value)}}}),o("br"),o("button",{attrs:{type:"submit"},on:{click:t.changeS}},[t._v("源更改")]),o("br"),o("input",{directives:[{name:"model",rawName:"v-model",value:t.Input,expression:"Input"}],ref:"In",attrs:{type:"text",placeholder:"输入书网址编号"},domProps:{value:t.Input},on:{input:function(e){e.target.composing||(t.Input=e.target.value)}}}),o("br"),o("button",{attrs:{type:"submit"},on:{click:t.textInput}},[t._v("书籍路径确定")]),o("br"),o("br"),t._l(t.books,function(e){return o("div",{key:e.time},[e.origin?o("li",{staticStyle:{"background-color":"#c9e4c6"}},[e.origin?o("span",[t._v("  来自:"+t._s(e.origin)+" ")]):t._e(),o("span",[t._v("\n      目录: \n      "),o("router-link",{attrs:{to:{path:e.routeLink}}},[t._v(" "+t._s(e.routeLink)+" ")])],1),decodeURI(e.name)?o("span",[t._v("   书名:   "+t._s(decodeURI(e.name)))]):t._e(),o("br")]):t._e()])}),null==t.books?o("div",[t._v(" Loading ")]):0==t.books.length?o("div",[t._v("no book , please start your own books trip")]):t._e()],2)},O=[];function N(t){o("RNFh")}var P=!1,F=N,H=null,M=null,R=Object(h["a"])(L,z,O,P,F,H,M),W=R.exports,C=(o("VjuZ"),{name:"BookIndex",data:function(){return{popupVisible:!1,errMessage:"",HTML:"",path:"",fontSize:null}},mounted:function(){this.getBookIndex(),this.getFontSize()},created:function(){var t=this;this.$router.afterEach(function(e,o){t.popupVisible=!1,t.path=e.path})},methods:{getBookIndex:function(){var t=this;this.path=this.$route.path,this.$store.dispatch("getBookIndex",this.$route.path).then(function(e){if(e.data.status){"".concat(JSON.stringify(e.data));throw new Error("资源 ERROR:".concat(e.data.status))}t.HTML=e.data}).catch(function(e){t.errMessage=e.message,t.popupVisible=!0})},getFontSize:function(){this.fontSize=+window.getComputedStyle(document.body)["font-size"].replace("px","")},setFont:function(t){this.$refs.getHtml.style.fontSize=t+"px"}},watch:{popupVisible:function(t){var e=this;setTimeout(function(){e.popupVisible=!1},5e3)},path:function(){this.HTML="",this.getBookIndex(),console.log("run path"),this.setFont(this.fontSize)},fontSize:function(t){this.setFont(t)}}}),T=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[t.HTML?o("div",[o("mt-popup",{staticStyle:{background:"#efbcbc",color:"black",width:"100%"},attrs:{position:"top","popup-transition":"popup-fade"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[t._v("\n    "+t._s(t.errMessage)+"\n  ")]),t.fontSize?o("div",[t._v("\n  字体大小 "+t._s(t.fontSize)+"\n  "),o("br"),o("mt-range",{attrs:{min:13,max:25,step:1,"bar-height":5},model:{value:t.fontSize,callback:function(e){t.fontSize=e},expression:"fontSize"}})],1):t._e()],1):t._e(),o("div",{staticClass:"book"},[o("div",{ref:"getHtml",domProps:{innerHTML:t._s(t.HTML)}})]),""==t.HTML?o("div",[t._v(" Loading ")]):t._e()])},U=[];function J(t){o("giLl")}var D=!1,X=J,Q="data-v-df15663c",Y=null,G=Object(h["a"])(C,T,U,D,X,Q,Y),q=G.exports;n["default"].use(x["a"]);var K=new x["a"]({routes:[{path:"/",name:"home",component:W},{path:"*",name:"BookIndex",component:q}]}),Z=o("Au9i");o("d8/S");n["default"].component(Z["Range"].name,Z["Range"]),n["default"].component(Z["Popup"].name,Z["Popup"]),n["default"].config.productionTip=!1,new n["default"]({axios:r,router:K,store:c,render:function(t){return t(k)}}).$mount("#app")},RNFh:function(t,e){},b3AN:function(t,e){},"d8/S":function(t,e){},giLl:function(t,e){},rQBB:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("Y1S0"),i=(o.n(n),o("CvWX"));o.n(i);function s(t,e){var o="/";return t.endsWith(o)?t+e:t+o+e}String.prototype.trimStr=function(t){var e=this;return e.startsWith("/")&&(e=e.slice(1)),e.endsWith("/")&&(e=e.slice(0,-1)),e},e["default"]=s}},[0]);
//# sourceMappingURL=app.5dd61fbe.js.map