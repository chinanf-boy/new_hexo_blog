webpackJsonp([1],{"+VGo":function(t,e){},0:function(t,e,n){t.exports=n("NHnr")},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("EuXz");var o=n("/5sW"),i=(n("SldL"),n("7hDC")),r=n.n(i),s=(n("CvWX"),n("Y1S0"),n("NYxO")),a=n("mtWM");a.defaults.timeout=5e3,Object({NODE_ENV:"production",BASE_URL:"/"}).BOOK_DEV?a.defaults.baseURL="http://localhost:5000":a.defaults.baseURL="https://getnoabsbooks.herokuapp.com",console.log(Object({NODE_ENV:"production",BASE_URL:"/"}).BookDev);var u=a,c=n("hBlz"),l=n.n(c);n("rQBB"),o["default"].use(s["a"]);var p=new s["a"].Store({state:{books:[],Api:"http://m.76wx.com",suffix:"html",directory:"book",isHomeLoading:!1},mutations:{setHomeLoading:function(t,e){t.isHomeLoading=e},clearBooks:function(t){t.books=[]},addBooks:function(t,e){Object.keys(e).forEach(function(n){t.books.push(e[n])})},changeApi:function(t,e){t.Api=e},changeSuffix:function(t,e){t.suffix=e}},getters:{getFullUrl:function(t){return function(e){var n=new l.a(t.Api),o="";if(e.endsWith("/")&&(o="/"),e=e.trimStr("/"),e+=o,e.startsWith(t.directory)?n.segment(e):(n.directory(t.directory),n.segment(e)),n.href().endsWith("/"))return n.href();if(n.suffix())return n.href();if(2==n.segment().length)return n.href()+"/";var i=n.suffix(t.suffix).href();return i}}},actions:{addJsonStore:function(t,e){return console.log("adding jsonstore",e),u.post("/api/addJsonStore",{url:e}).then(function(t){console.log("add jsonstore",t.data.ok)})},getAllBooks:function(){var t=r()(regeneratorRuntime.mark(function t(e){var n,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,n("setHomeLoading",!0),n("clearBooks"),t.next=5,u.get("/api/getAllBooks").then(function(t){n("addBooks",t.data.result)});case 5:return o=t.sent,n("setHomeLoading",!1),console.log("getAllBooks done"),t.abrupt("return",o);case 9:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getBookIndex:function(t,e){t.commit,t.state;var n=t.getters,o=n.getFullUrl(e);return u.post("/api/getNoAbsBooks",{url:o}).then(function(t){return t})}}}),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" |\n    "),n("router-link",{attrs:{to:"/about"}},[t._v("About me")])],1),n("router-view")],1),n("footer")])},h=[],v=n("XyMi");function d(t){n("+VGo")}var m=null,g=!1,b=d,_=null,k=null,x=Object(v["a"])(m,f,h,g,b,_,k),S=x.exports,j=n("/ocq"),E=n("Biqn"),I=n.n(E),w={name:"HelloWorld",props:{msg:String}},y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[n("h1",[t._v(t._s(t.msg))]),t._m(0),n("h3",[t._v("Installed CLI Plugins")]),t._m(1),n("h3",[t._v("Essential Links")]),t._m(2),n("h3",[t._v("Ecosystem")]),t._m(3)])},B=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n    For guide and recipes on how to configure / customize this project,"),n("br"),t._v("\n    check out the\n    "),n("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/docs",target:"_blank"}},[t._v("vue-cli documentation")]),t._v(".\n  ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank"}},[t._v("babel")])]),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank"}},[t._v("eslint")])]),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-e2e-cypress",target:"_blank"}},[t._v("e2e-cypress")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://vuejs.org",target:"_blank"}},[t._v("Core Docs")])]),n("li",[n("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank"}},[t._v("Forum")])]),n("li",[n("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank"}},[t._v("Community Chat")])]),n("li",[n("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank"}},[t._v("Twitter")])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[n("a",{attrs:{href:"https://router.vuejs.org/en/essentials/getting-started.html",target:"_blank"}},[t._v("vue-router")])]),n("li",[n("a",{attrs:{href:"https://vuex.vuejs.org/en/intro.html",target:"_blank"}},[t._v("vuex")])]),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank"}},[t._v("vue-devtools")])]),n("li",[n("a",{attrs:{href:"https://vue-loader.vuejs.org/en",target:"_blank"}},[t._v("vue-loader")])]),n("li",[n("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank"}},[t._v("awesome-vue")])])])}];function A(t){n("b3AN")}var L=!1,$=A,V="data-v-487ff563",M=null,H=Object(v["a"])(w,y,B,L,$,V,M),P=H.exports,O=(n("rQBB"),{name:"home",data:function(){return{Input:"2222",API:"",popupVisible:!1,errMessage:""}},created:function(){var t=this;this.$store.dispatch("getAllBooks").then(function(){}).catch(function(e){t.errMessage="Ê∑ªÂä† ‰π¶Á±ç Â§±Ë¥•"})},computed:I()({},Object(s["b"])({books:function(t){return t.books},isLoading:function(t){return t.isHomeLoading}})),mounted:function(){this.API=this.$store.state.Api,this.$refs.In.focus()},methods:{textInput:function(){var t=this;if(this.Input){var e=this.getFull(this.Input);this.addJsonStore(e).catch(function(e){t.popupVisible=!0});var n=new l.a(e);n.suffix()&&this.$store.commit("changeSuffix",n.suffix()),this.$router.push({path:"".concat(n.pathname())})}else this.setErrMsg("ËØ∑ËæìÂÖ•Ê≠£Á°Æ ‰π¶Á±ç")},getFull:function(t){return this.$store.getters.getFullUrl(t)},addJsonStore:function(t){return this.$store.dispatch("addJsonStore",t)},changeS:function(){var t=new l.a(this.API);t.origin()?this.$store.commit("changeApi",t.origin()):this.setErrMsg("Á°ÆÂÆö Ê∫êÊòØ url")},setErrMsg:function(t){this.popupVisible=!0,this.errMessage=t}},watch:{popupVisible:function(t){var e=this;setTimeout(function(){e.popupVisible=!1},5e3)}},components:{HelloWorld:P}}),z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("mt-popup",{attrs:{position:"bottom","popup-transition":"popup-fade"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[t._v("\n    "+t._s(t.errMessage)+"\n  ")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.API,expression:"API"}],attrs:{type:"text",placeholder:"ÈªòËÆ§Ê∫ê"},domProps:{value:t.API},on:{input:function(e){e.target.composing||(t.API=e.target.value)}}}),n("br"),n("button",{attrs:{type:"submit"},on:{click:t.changeS}},[t._v("Ê∫êÊõ¥Êîπ")]),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:t.Input,expression:"Input"}],ref:"In",attrs:{type:"text",placeholder:"ËæìÂÖ•‰π¶ÁΩëÂùÄÁºñÂè∑"},domProps:{value:t.Input},on:{input:function(e){e.target.composing||(t.Input=e.target.value)}}}),n("br"),n("button",{attrs:{type:"submit"},on:{click:t.textInput}},[t._v("‰π¶Á±çIDÁ°ÆÂÆö")]),n("br"),n("br"),t._l(t.books,function(e){return n("div",{key:e.time,staticClass:"book-list"},[e.origin?n("li",{staticStyle:{"background-color":"#c9e4c6"}},[e.origin?n("span",[t._v(t._s(e.origin)+" - ")]):t._e(),n("span",[n("router-link",{attrs:{to:{path:e.routeLink}}},[t._v(" "+t._s(decodeURI(e.name))+" ")])],1),n("br")]):t._e()])}),t.isLoading?n("div",[t._v(" Loading ")]):0==t.books.length?n("div",[t._v("no book , please start your own books trip")]):t._e()],2)},C=[];function F(t){n("RNFh")}var N=!1,R=F,W=null,T=null,U=Object(v["a"])(O,z,C,N,R,W,T),D=U.exports,J={name:"About"},Q=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},G=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"about"},[n("a",{attrs:{href:"https://github.com/chinanf-boy"}},[t._v(" >> Follow me üòä "),n("br"),t._v(" >> Star project ‚ù§Ô∏è  ")]),n("div",[t._v("\n         yobrave 2018 5.13\n        ")])])}];function X(t){n("dPEP")}var Y=!1,q=X,K="data-v-95e0dc3e",Z=null,tt=Object(v["a"])(J,Q,G,Y,q,K,Z),et=tt.exports,nt=(n("VjuZ"),{name:"BookIndex",data:function(){return{popupVisible:!1,errMessage:"",HTML:"",path:"",fontSize:null}},mounted:function(){this.getBookIndex(),this.getFontSize()},created:function(){var t=this;this.$router.afterEach(function(e,n){t.popupVisible=!1,t.path=e.path})},methods:{getBookIndex:function(){var t=this;this.path=this.$route.path,this.$store.dispatch("getBookIndex",this.$route.path).then(function(e){if(e.data.status){"".concat(JSON.stringify(e.data));throw new Error("ËµÑÊ∫ê ERROR:".concat(e.data.status))}t.HTML=e.data}).catch(function(e){t.errMessage=e.message,t.popupVisible=!0})},getFontSize:function(){this.fontSize=+window.getComputedStyle(document.body)["font-size"].replace("px","")},setFont:function(t){this.$refs.getHtml.style.fontSize=t+"px"}},watch:{popupVisible:function(t){var e=this;setTimeout(function(){e.popupVisible=!1},5e3)},path:function(){this.HTML="",this.getBookIndex(),console.log("run path"),this.setFont(this.fontSize)},fontSize:function(t){this.setFont(t)}}}),ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[t.HTML?n("div",[n("mt-popup",{staticStyle:{background:"#efbcbc",color:"black",width:"100%"},attrs:{position:"top","popup-transition":"popup-fade"},model:{value:t.popupVisible,callback:function(e){t.popupVisible=e},expression:"popupVisible"}},[t._v("\n    "+t._s(t.errMessage)+"\n  ")]),t.fontSize?n("div",[t._v("\n  Â≠ó‰ΩìÂ§ßÂ∞è "+t._s(t.fontSize)+"\n  "),n("br"),n("mt-range",{attrs:{min:13,max:25,step:1,"bar-height":5},model:{value:t.fontSize,callback:function(e){t.fontSize=e},expression:"fontSize"}})],1):t._e()],1):t._e(),n("div",{staticClass:"book"},[n("div",{ref:"getHtml",staticClass:"cover",domProps:{innerHTML:t._s(t.HTML)}})]),""==t.HTML?n("div",[t._v(" Loading ")]):t._e()])},it=[];function rt(t){n("Q/bG")}var st=!1,at=rt,ut="data-v-497f55f6",ct=null,lt=Object(v["a"])(nt,ot,it,st,at,ut,ct),pt=lt.exports;o["default"].use(j["a"]);var ft=new j["a"]({routes:[{path:"/",name:"home",component:D},{path:"/about",name:"about",component:et},{path:"*",name:"BookIndex",component:pt}]}),ht=n("Au9i");n("d8/S");o["default"].component(ht["Range"].name,ht["Range"]),o["default"].component(ht["Popup"].name,ht["Popup"]),o["default"].config.productionTip=!1,new o["default"]({axios:u,router:ft,store:p,render:function(t){return t(S)}}).$mount("#app")},"Q/bG":function(t,e){},RNFh:function(t,e){},b3AN:function(t,e){},"d8/S":function(t,e){},dPEP:function(t,e){},rQBB:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("Y1S0"),i=(n.n(o),n("CvWX"));n.n(i);function r(t,e){var n="/";return t.endsWith(n)?t+e:t+n+e}String.prototype.trimStr=function(t){var e=this;return e.startsWith("/")&&(e=e.slice(1)),e.endsWith("/")&&(e=e.slice(0,-1)),e},e["default"]=r}},[0]);
//# sourceMappingURL=app.c23f4ed3.js.map